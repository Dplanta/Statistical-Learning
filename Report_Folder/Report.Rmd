---
title: "Titolo del progetto"
author: "Domenico Plantamura, Eduardo David Lotto, Manuel D'Alterio Grazioli, Gabriele Fugagnoli"
font: 12pt
output:
  pdf_document:
    toc: true
    # number_sections: true
  html_document:
    toc: true
    # number_sections: true
  word_document:
    toc: true
    # number_sections: true
---

\

# Introduction

## Objective of the project

With these project we want to investigate whether the salaries of the NBA players are fair or not, in proportion to their last year's performances. *AGGIUNGERE DETTAGLI E SPIEGARE IN SINTESI IL WEB SCRAPING REALIZZATO*

## Steps followed

To perform our analysis we followed these steps:

1.  Data collection;

2.  Data exploration;

3.  Analysis;

4.  Interpretation.

We now explain in depth each step.

\

# Data collection

## Web scraping

We performed a web scraping operation from the [Official NBA Stats](https://www.nba.com/stats) website, from which we collected the stats of the players. *AGGIUNGERE DETTAGLI, LE ROBE DEI 48 MINUTI ETC ETC, qui c'è davvero molto da scrivere da quanto ho capito ed è uno dei punti forti del progetto*

## Data integration

*Spiegare tutta la roba di come si sono unite le tabelle, aggiustato i dati come i nomi etc etc*

```{r useful-code, include=FALSE}
library(readxl)
data_salary <- read_excel("NBA_players_salaries_HH.xlsx")
data_traditional_per48 <- read.csv("RS_traditional_per48.csv")
data_traditional_tot <- read.csv("RS_traditional_TOTALS.csv")
data_advanced <- read.csv("RS_advanced_per48.csv")
data_miscellaneous <- read.csv("RS_miscellaneous_per48.csv")
data_vorp <- read_excel("vorp.xlsx")
MIN_G <- data_traditional_tot$MIN/data_traditional_tot$GP
data_traditional_tot <- cbind(data_traditional_tot, MIN_G)
data_salary <- data_salary[, c(2, 3)]
data_traditional_per48 <- data_traditional_per48[, c(3, 7, 8, 15, 18, 21:32)]
data_traditional_tot <- data_traditional_tot[, c(3, 12, 68)]
data_advanced <- data_advanced[, c(3, 14, 17, 20, 23, 31, 32, 38)]
data_miscellaneous <- data_miscellaneous[, c(3, 24)]
data_vorp <- data_vorp[, c(2, 3, 23, 31, 32)]
names(data_salary)[names(data_salary) == "Player"] <- "PLAYER_NAME"
data_trad_tot <- data_traditional_tot[data_traditional_tot$MIN > 480, ]
data_st <- merge(data_salary, data_traditional_per48, by = "PLAYER_NAME", all = TRUE)
data_ast <- merge(data_st, data_advanced, by = "PLAYER_NAME", all = TRUE)
data_mast <- merge(data_ast, data_miscellaneous, by = "PLAYER_NAME", all = TRUE)
data_mastt <- merge(data_mast, data_trad_tot, by = "PLAYER_NAME", all = TRUE)
final_dataset <- merge(data_mastt, data_vorp, by = "PLAYER_NAME", all = TRUE)
final_dataset <- final_dataset[!is.na(final_dataset$AGE), ]
final_dataset <- final_dataset[!is.na(final_dataset$MIN), ]
final_dataset <- final_dataset[!is.na(final_dataset$VORP), ]
final_dataset
NA_number <- colSums(is.na(final_dataset))
print(NA_number)
final_dataset <- final_dataset[, -17]
colnames(final_dataset)[colnames(final_dataset) == 'PFD.y'] <- 'PFD'
colnames(final_dataset)[colnames(final_dataset) == '2023/24'] <- 'Salary'
final_dataset$Salary <- as.numeric(gsub("[\\$\\,]", "", final_dataset$Salary))
```

```{r datasets-merging, eval=FALSE}
data_st <- merge(data_salary, data_traditional_per48, by = "PLAYER_NAME", all = TRUE)
data_ast <- merge(data_st, data_advanced, by = "PLAYER_NAME", all = TRUE)
data_mast <- merge(data_ast, data_miscellaneous, by = "PLAYER_NAME", all = TRUE)
data_mastt <- merge(data_mast, data_trad_tot, by = "PLAYER_NAME", all = TRUE)
final_dataset <- merge(data_mastt, data_vorp, by = "PLAYER_NAME", all = TRUE)
```

## Data exploration

```{r example-of-dataset, echo=FALSE, warning=FALSE}
library(knitr)
kable(final_dataset[1:5, 1:10], format="simple", align = "llcccccccc")
kable(final_dataset[1:5, 11:20], format="simple", align = "cccccccccc")
kable(final_dataset[1:5, 21:31], format="simple", align = "ccccccccccc")
```










